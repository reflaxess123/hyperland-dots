# Мои Dotfiles для Hyprland

Это моя персональная конфигурация для Hyprland, Wayland-композитора.

## Особенности

*   **Минималистичный и чистый вид:** Конфигурация нацелена на минимализм, с использованием `dwindle` лэйаута.
*   **Анимации:** Плавные и приятные анимации для окон, рабочих столов и слоев.
*   **Удобные хоткеи:** Продуманные сочетания клавиш для управления окнами, приложениями и системой.
*   **Скрипты:** Набор полезных скриптов для автоматизации задач.

## Установка

1.  **Клонировать репозиторий:**
    ```bash
    git clone <URL-вашего-репозитория> ~/.config/hypr
    ```
2.  **Установить зависимости:**
    *   `hyprland`
    *   `waybar`
    *   `wofi`
    *   `swww`
    *   `swaync`
    *   `ghostty` (или ваш любимый терминал)
    *   `nautilus` (или ваш любимый файловый менеджер)
    *   `google-chrome-stable`
    *   `pavucontrol`
    *   `wl-paste`
    *   `cliphist`
    *   `udiskie`
    *   `eww`
    *   `hyprshot`
    *   `redsocks` (опционально, для скрипта `socks-toggle.sh`)

3.  **Сделать скрипты исполняемыми:**
    ```bash
    chmod +x ~/.config/hypr/scripts/*.sh
    ```

## Сочетания клавиш

| Клавиша                  | Действие                                           |
| ------------------------ | -------------------------------------------------- |
| `Alt + W`                | Открыть терминал (`ghostty`)                       |
| `Alt + Q`                | Закрыть активное окно                              |
| `Alt + M`                | Выйти из Hyprland                                  |
| `Alt + Ctrl + W`         | Перезагрузить Hyprland и все компоненты            |
| `Alt + E`                | Открыть файловый менеджер (`nautilus`)             |
| `Alt + B`                | Открыть браузер (`google-chrome-stable`)           |
| `Alt + T`                | Переключить активное окно в плавающий режим        |
| `Alt + Shift + T`        | Переключить активное окно в плавающий режим (альтернативный) |
| `Alt + Ctrl + B`         | Открыть Brave в режиме Wayland                     |
| `Alt + Ctrl + T`         | Открыть `missioncenter`                            |
| `Alt + Space`            | Открыть меню приложений (`wofi`)                   |
| `Alt + O`                | Открыть `obs`                                      |
| `Alt + C`                | Открыть `cursor.appimage`                          |
| `Alt + N`                | Открыть/закрыть центр уведомлений (`swaync`)       |
| `Alt + F`                | Переключить полноэкранный режим для активного окна |
| `Alt + Shift + W`        | Установить следующие обои                          |
| `Alt + H/J/K/L`          | Переместить фокус между окнами (как в Vim)         |
| `Alt + Shift + H/J/K/L`  | Переместить активное окно                          |
| `Alt + Ctrl + H/J/K/L`   | Изменить размер активного окна                     |
| `Alt + V`                | Включить/выключить прокси (redsocks)               |
| `Alt + Shift + D`        | Показать/скрыть EWW виджет                         |
| `Alt + Y`                | Сменить тему Waybar                                |
| `Alt + 1-9, 0`           | Переключиться на рабочий стол 1-10                 |
| `Alt + Shift + 1-9, 0`   | Переместить активное окно на рабочий стол 1-10      |
| `Print Screen`           | Сделать скриншот области и скопировать в буфер обмена |
| `Alt + Ctrl + S`         | Сделать скриншот области и скопировать в буфер обмена |
| `Alt + Scroll Down`      | Переключиться на следующий рабочий стол            |
| `Alt + Scroll Up`        | Переключиться на предыдущий рабочий стол           |

## Скрипты

*   `restart_hyprland.sh`: Перезагружает Hyprland, Waybar, swaync и другие компоненты.
*   `socks-toggle.sh`: Включает и выключает системный прокси с помощью `redsocks` и `iptables`.
*   `wall-next.sh`: Устанавливает случайные обои из папки `~/wallpapers`.
*   `gpu-fan-control.sh`: Управление вентиляторами NVIDIA GPU (см. раздел ниже).

## NVIDIA GPU Fan Control на Wayland

### Проблема

На Wayland (Hyprland) нельзя управлять вентиляторами GPU через `nvidia-settings`, потому что:
1. `nvidia-settings` требует X сервер с расширением NV-CONTROL
2. XWayland не подходит — он не читает `xorg.conf` и не имеет доступа к Coolbits
3. Xvfb (виртуальный framebuffer) не работает с реальным GPU
4. Когда Hyprland запущен, он захватывает GPU через DRM и X сервер не может получить modesetting

### Решение

Systemd сервис который запускается **ДО** display manager:
1. Поднимает временный X сервер на `:99` с nvidia драйвером и Coolbits
2. Настраивает вентиляторы через `nvidia-settings`
3. Убивает X сервер — настройки вентиляторов сохраняются!
4. Hyprland запускается и работает нормально

### Установка

```bash
# Запустить скрипт установки
./scripts/setup-gpu-fan.sh

# Перезагрузиться
reboot
```

### Что создаёт скрипт

| Файл | Описание |
|------|----------|
| `/etc/X11/xorg.conf.d/20-nvidia.conf` | Xorg конфиг с Coolbits=4 и BusID видеокарты |
| `/usr/local/bin/gpu-fan-setup.sh` | Скрипт настройки вентиляторов |
| `/etc/systemd/system/gpu-fan.service` | Systemd сервис |

### Проверка

```bash
# Логи
cat /var/log/gpu-fan.log

# Текущая скорость
nvidia-smi --query-gpu=fan.speed --format=csv
```

### Изменение скорости вентиляторов

```bash
# Отредактировать сервис
sudo nano /etc/systemd/system/gpu-fan.service

# Изменить значение GPU_FAN_SPEED (по умолчанию 62)
Environment="GPU_FAN_SPEED=70"

# Применить
sudo systemctl daemon-reload
sudo systemctl restart gpu-fan
```

### Требования

- `nvidia-settings`
- `xorg-server` (не xvfb!)
- NVIDIA GPU с проприетарным драйвером

## Конфигурация

Основной файл конфигурации - `hyprland.conf`. В нем вы можете настроить:

*   **Мониторы:** разрешение, частоту обновления и расположение.
*   **Переменные:** терминал, файловый менеджер, меню и браузер по умолчанию.
*   **Автозапуск:** приложения, которые запускаются вместе с Hyprland.
*   **Оформление:** отступы, рамки, тени, размытие и скругление.
*   **Анимации:** настройка анимаций для окон, рабочих столов и слоев.
*   **Лэйауты:** `dwindle` и `master`.
*   **Устройства ввода:** настройки клавиатуры, мыши и тачпада.
*   **Жесты:** настройка жестов для тачпада.
*   **Правила для окон:** специфичные правила для определенных приложений.
*   **Слои:** правила для слоев Wayland (например, для `wofi` и `eww`).
